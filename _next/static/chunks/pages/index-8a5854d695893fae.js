(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7650:function(n,t,e){"use strict";e.a(n,(async function(r){e.d(t,{bL:function(){return x},K8:function(){return E},Ih:function(){return I},yq:function(){return T},gk:function(){return S},ug:function(){return L},j7:function(){return k},yG:function(){return M},hC:function(){return D},Id:function(){return H},Wl:function(){return F},jJ:function(){return W},h6:function(){return j},eY:function(){return O},Ns:function(){return N},Y2:function(){return R},IS:function(){return P},bf:function(){return C},Z4:function(){return A},tL:function(){return G},Qu:function(){return $},EB:function(){return z},Yc:function(){return K},XP:function(){return Z},rf:function(){return Y},Ts:function(){return B},Mz:function(){return U},Zu:function(){return q},_G:function(){return J},kC:function(){return V},m_:function(){return X},Or:function(){return Q},oH:function(){return nn}});var i=e(4361);n=e.hmd(n);var o=r([i]);i=(o.then?await o:o)[0];const u=new Array(32).fill(void 0);function c(n){return u[n]}u.push(void 0,null,!0,!1);let a=u.length;function f(n){const t=c(n);return function(n){n<36||(u[n]=a,a=n)}(n),t}function s(n){a===u.length&&u.push(u.length+1);const t=a;return a=u[t],u[t]=n,t}let _=new("undefined"===typeof TextDecoder?(0,n.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});_.decode();let l=null;function d(){return null!==l&&l.buffer===i.memory.buffer||(l=new Uint8Array(i.memory.buffer)),l}function g(n,t){return _.decode(d().subarray(n,n+t))}let m=0;let h=new("undefined"===typeof TextEncoder?(0,n.require)("util").TextEncoder:TextEncoder)("utf-8");const b="function"===typeof h.encodeInto?function(n,t){return h.encodeInto(n,t)}:function(n,t){const e=h.encode(n);return t.set(e),{read:n.length,written:e.length}};let y=null;function w(){return null!==y&&y.buffer===i.memory.buffer||(y=new Int32Array(i.memory.buffer)),y}function p(n,t){try{return n.apply(this,t)}catch(e){i.__wbindgen_exn_store(s(e))}}function v(n,t){return d().subarray(n/1,n/1+t)}const x=Object.freeze({Empty:0,0:"Empty",Filler:1,1:"Filler",IMino:2,2:"IMino",JMino:3,3:"JMino",LMino:4,4:"LMino",OMino:5,5:"OMino",SMino:6,6:"SMino",TMino:7,7:"TMino",ZMino:8,8:"ZMino"});class E{static __wrap(n){const t=Object.create(E.prototype);return t.ptr=n,t}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const n=this.__destroy_into_raw();i.__wbg_gameio_free(n)}static new(){var n=i.gameio_new();return E.__wrap(n)}width(){return i.gameio_width(this.ptr)>>>0}height(){return i.gameio_height(this.ptr)>>>0}view_data_ptr(){return i.gameio_view_data_ptr(this.ptr)}get_index(n,t){return i.gameio_get_index(this.ptr,n,t)>>>0}run(){i.gameio_run(this.ptr)}restart(){i.gameio_restart(this.ptr)}update(){i.gameio_update(this.ptr)}is_gameover(){return 0!==i.gameio_is_gameover(this.ptr)}is_pause(){return 0!==i.gameio_is_pause(this.ptr)}is_startup(){return 0!==i.gameio_is_startup(this.ptr)}is_running(){return 0!==i.gameio_is_running(this.ptr)}toggle_pause(){i.gameio_toggle_pause(this.ptr)}move_left(){i.gameio_move_left(this.ptr)}move_right(){i.gameio_move_right(this.ptr)}soft_drop(){i.gameio_soft_drop(this.ptr)}rotate_left(){i.gameio_rotate_left(this.ptr)}rotate_right(){i.gameio_rotate_right(this.ptr)}}function I(){return s(new Error)}function T(n,t){var e=function(n,t,e){if(void 0===e){const e=h.encode(n),r=t(e.length);return d().subarray(r,r+e.length).set(e),m=e.length,r}let r=n.length,i=t(r);const o=d();let u=0;for(;u<r;u++){const t=n.charCodeAt(u);if(t>127)break;o[i+u]=t}if(u!==r){0!==u&&(n=n.slice(u)),i=e(i,r,r=u+3*n.length);const t=d().subarray(i+u,i+r);u+=b(n,t).written}return m=u,i}(c(t).stack,i.__wbindgen_malloc,i.__wbindgen_realloc),r=m;w()[n/4+1]=r,w()[n/4+0]=e}function S(n,t){try{console.error(g(n,t))}finally{i.__wbindgen_free(n,t)}}function L(n){f(n)}function k(){return p((function(n,t){c(n).getRandomValues(c(t))}),arguments)}function M(){return p((function(n,t,e){c(n).randomFillSync(v(t,e))}),arguments)}function D(){return s(n)}function H(n){return s(c(n).process)}function F(n){const t=c(n);return"object"===typeof t&&null!==t}function W(n){return s(c(n).versions)}function j(n){return s(c(n).node)}function O(n){return"string"===typeof c(n)}function N(){return p((function(n,t,e){return s(c(n).require(g(t,e)))}),arguments)}function R(n){return s(c(n).crypto)}function P(n){return s(c(n).msCrypto)}function C(n,t){return s(new Function(g(n,t)))}function A(){return p((function(n,t){return s(c(n).call(c(t)))}),arguments)}function G(){return p((function(){return s(self.self)}),arguments)}function $(){return p((function(){return s(window.window)}),arguments)}function z(){return p((function(){return s(globalThis.globalThis)}),arguments)}function K(){return p((function(){return s(e.g.global)}),arguments)}function Z(n){return void 0===c(n)}function Y(n){return s(c(n).buffer)}function B(n){return s(new Uint8Array(c(n)))}function U(n,t,e){c(n).set(c(t),e>>>0)}function q(n){return c(n).length}function J(n){return s(new Uint8Array(n>>>0))}function V(n,t,e){return s(c(n).subarray(t>>>0,e>>>0))}function X(n){return s(c(n))}function Q(n,t){throw new Error(g(n,t))}function nn(){return s(i.memory)}}))},5301:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(441)}])},5990:function(n,t,e){"use strict";e.a(n,(async function(n){e.d(t,{m:function(){return r.m}});var r=e(2792),i=n([r]);r=(i.then?await i:i)[0]}))},2792:function(n,t,e){"use strict";e.a(n,(async function(n){e.d(t,{m:function(){return _}});var r=e(5893),i=e(7294),o=e(6735),u=e(2737),c=e.n(u),a=n([o]);o=(a.then?await a:a)[0];var f="___canvas_main",s="___canvas_screen",_=function(){return(0,o.iD)(),i.useEffect((function(){if(document){var n=document.getElementById(f);if(n){var t=n.getContext("2d");if(t)if(document.getElementById(s)){var e=n.getContext("2d");if(e){setInterval((function(){(0,o.mq)((function(n){(0,o.f_)({game:n,ctxMainLayer:t,ctxScreenLayer:e})}))}),o.zD)}}}}}),[]),i.useEffect((function(){if(window){var n=function(n){(0,o.$y)(n.code)},t=function(n){(0,o.T4)(n.code)};return window.addEventListener("keydown",n),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",t)}}}),[]),(0,r.jsx)("div",{className:c().root,children:(0,r.jsxs)("div",{className:c().container,children:[(0,r.jsx)("canvas",{id:f,className:c().canvas,width:o.Wk.WIDTH,height:o.Wk.HEIGHT}),(0,r.jsx)("canvas",{id:s,className:c().canvas,width:o.Wk.WIDTH,height:o.Wk.HEIGHT})]})})}}))},7251:function(n,t,e){"use strict";e.a(n,(async function(n){e.d(t,{U:function(){return r.U}});var r=e(5980),i=n([r]);r=(i.then?await i:i)[0]}))},5980:function(n,t,e){"use strict";e.a(n,(async function(n){e.d(t,{U:function(){return f}});var r=e(5893),i=(e(7294),e(9008)),o=e(5990),u=e(3381),c=e.n(u),a=n([o]);o=(a.then?await a:a)[0];var f=function(){return(0,r.jsxs)("div",{className:c().root,children:[(0,r.jsxs)(i.default,{children:[(0,r.jsx)("title",{children:"WASM-de-TETRIS"}),(0,r.jsx)("meta",{name:"description",content:"WASM de TETRIS"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("header",{className:c().header,children:"WASM-de-TETRIS"}),(0,r.jsx)("main",{className:c().main,children:(0,r.jsx)(o.m,{})}),(0,r.jsx)("footer",{className:c().footer,children:"\xa9 2022 waien"})]})}}))},4515:function(n,t,e){"use strict";e.a(n,(async function(n){e.d(t,{U:function(){return i.U}});var r=e(5990),i=e(7251),o=n([i,r]);[i,r]=o.then?await o:o}))},3895:function(n,t,e){"use strict";e.d(t,{Wk:function(){return r},nb:function(){return i},r$:function(){return o},bM:function(){return u},zD:function(){return c}});var r={WIDTH:205,HEIGHT:392},i={SMALL_SIZE:18,SIZE:36,LINE_HEIGHT:40,STYLE:function(n){return"".concat(n,'px "Press Start 2p"')}},o={GRID:"#CCCCCC",EMPTY:"#DDDDDD",FILLER:"#000000",FONT:"#FFFFFF",I:"#00F0F0",J:"#0000FF",L:"#FF8800",O:"#FFFF00",S:"#88FF00",T:"#FF00FF",Z:"#FF0000"},u=16,c=1e3/60},3862:function(n,t,e){"use strict";e.d(t,{mq:function(){return a},iD:function(){return f}});var r,i=e(4051),o=e.n(i),u=e(7294);function c(n,t,e,r,i,o,u){try{var c=n[o](u),a=c.value}catch(f){return void e(f)}c.done?t(a):Promise.resolve(a).then(r,i)}var a=function(n){if(r)return n(r)},f=function(){u.useEffect((function(){(function(){var n,t=(n=o().mark((function n(){var t,i,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(304).then(e.bind(e,2304));case 2:t=n.sent,t,i=t.GameIO,u=i.new(),r=u;case 7:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function u(n){c(o,r,i,u,a,"next",n)}function a(n){c(o,r,i,u,a,"throw",n)}u(void 0)}))});return function(){return t.apply(this,arguments)}})()()}),[])}},1469:function(n,t,e){"use strict";e.a(n,(async function(n){e.d(t,{f:function(){return s}});var r=e(7650),i=e(4361),o=e(3895),u=e(8325),c=n([r,i]);[r,i]=c.then?await c:c;var a=function(n,t,e){return n.get_index(t,e)},f=function(n){!function(n){n.ctx.beginPath(),n.ctx.strokeStyle=o.r$.GRID;for(var t=n.game.width(),e=n.game.height(),r=0;r<=t;r++)n.ctx.moveTo(r*(n.cellSize+1)+1,0),n.ctx.lineTo(r*(n.cellSize+1)+1,(n.cellSize+1)*e+1);for(var i=0;i<=e;i++)n.ctx.moveTo(0,i*(n.cellSize+1)+1),n.ctx.lineTo((n.cellSize+1)*t+1,i*(n.cellSize+1)+1);n.ctx.stroke()}({game:n.game,ctx:n.ctxMainLayer,cellSize:o.bM}),function(n){var t=n.game.view_data_ptr(),e=n.game.width(),u=n.game.height(),c=n.game.is_gameover(),f=new Uint8Array(i.memory.buffer,t,e*u);n.ctx.beginPath();for(var s=0;s<u;s++){for(var _=0;_<e;_++){var l=a(n.game,s,_);if(c)switch(f[l]){case r.bL.Empty:n.ctx.fillStyle=o.r$.EMPTY;break;default:n.ctx.fillStyle=o.r$.FILLER}else switch(f[l]){case r.bL.Filler:n.ctx.fillStyle=o.r$.FILLER;break;case r.bL.IMino:n.ctx.fillStyle=o.r$.I;break;case r.bL.JMino:n.ctx.fillStyle=o.r$.J;break;case r.bL.LMino:n.ctx.fillStyle=o.r$.L;break;case r.bL.OMino:n.ctx.fillStyle=o.r$.O;break;case r.bL.SMino:n.ctx.fillStyle=o.r$.S;break;case r.bL.TMino:n.ctx.fillStyle=o.r$.T;break;case r.bL.ZMino:n.ctx.fillStyle=o.r$.Z;break;default:n.ctx.fillStyle=o.r$.EMPTY}n.ctx.fillRect(_*(n.cellSize+1)+1,s*(n.cellSize+1)+1,n.cellSize,n.cellSize)}n.ctx.stroke()}}({game:n.game,ctx:n.ctxMainLayer,cellSize:o.bM}),function(n){if(n.game.is_startup()){n.ctx.clearRect(0,0,o.Wk.WIDTH,o.Wk.HEIGHT),n.ctx.beginPath(),n.ctx.fillStyle="rgba("+[0,0,0,0]+")",n.ctx.fillRect(0,0,o.Wk.WIDTH,o.Wk.HEIGHT);var t=o.nb.SMALL_SIZE,e=o.Wk.WIDTH/2-3*t/2,r=o.Wk.WIDTH/2-7*t/2,i=o.Wk.HEIGHT/2;n.ctx.font=o.nb.STYLE(t),n.ctx.fillStyle=o.r$.FONT,n.ctx.fillText("HIT",e,i),n.ctx.fillText("ANY KEY",r,i+o.nb.LINE_HEIGHT)}}({game:n.game,ctx:n.ctxScreenLayer}),function(n){if(n.game.is_pause()){n.ctx.beginPath(),n.ctx.fillStyle="rgba("+[0,0,0,.5]+")",n.ctx.fillRect(0,0,o.Wk.WIDTH,o.Wk.HEIGHT);var t=o.nb.SIZE,e=o.Wk.WIDTH/2-5*t/2,r=o.Wk.HEIGHT/2;n.ctx.font=o.nb.STYLE(t),n.ctx.fillStyle=o.r$.FONT,n.ctx.fillText("PAUSE",e,r)}}({game:n.game,ctx:n.ctxScreenLayer}),function(n){if(n.game.is_gameover()){var t=o.nb.SIZE,e=o.Wk.WIDTH/2-4*t/2,r=o.Wk.HEIGHT/2;n.ctx.font=o.nb.STYLE(t),n.ctx.fillStyle=o.r$.FONT,n.ctx.fillText("GAME",e,r),n.ctx.fillText("OVER",e,r+o.nb.LINE_HEIGHT)}}({game:n.game,ctx:n.ctxScreenLayer})},s=function(n){!function(n){(0,u.Zk)({game:n.game}),n.game.update()}({game:n.game}),f(n)}}))},6735:function(n,t,e){"use strict";e.a(n,(async function(n){e.d(t,{Wk:function(){return r.Wk},zD:function(){return r.zD},iD:function(){return i.iD},mq:function(){return i.mq},f_:function(){return o.f},$y:function(){return u.$y},T4:function(){return u.T4}});var r=e(3895),i=e(3862),o=e(1469),u=e(8325),c=n([o]);o=(c.then?await c:c)[0]}))},8325:function(n,t,e){"use strict";function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}e.d(t,{Zk:function(){return u},$y:function(){return c},T4:function(){return f}});var i=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),i.forEach((function(t){r(n,t,e[t])}))}return n}({},{moveLeft:{frame:0,isInputed:!1,holdBehavior:"ACCEL"},moveRight:{frame:0,isInputed:!1,holdBehavior:"ACCEL"},rotateLeft:{frame:0,isInputed:!1,holdBehavior:"NEVER"},rotateRight:{frame:0,isInputed:!1,holdBehavior:"NEVER"},softDrop:{frame:0,isInputed:!1,holdBehavior:"SMOOTH"},togglePause:{frame:0,isInputed:!1,holdBehavior:"NEVER"},anyKeys:{frame:0,isInputed:!1,holdBehavior:"NEVER"}}),o=function(n,t){var e=i[n].holdBehavior;if(i[n].isInputed){switch(e){case"ACCEL":(0===i[n].frame||i[n].frame>10&&i[n].frame%5===0)&&t();break;case"NEVER":0===i[n].frame&&t();break;default:t()}i[n].frame+=1}},u=function(n){o("moveLeft",(function(){return n.game.move_left()})),o("moveRight",(function(){return n.game.move_right()})),o("softDrop",(function(){return n.game.soft_drop()})),o("rotateLeft",(function(){return n.game.rotate_left()})),o("rotateRight",(function(){return n.game.rotate_right()})),o("togglePause",(function(){return n.game.toggle_pause()})),n.game.is_startup()&&o("anyKeys",(function(){return n.game.run()})),n.game.is_gameover()&&setTimeout((function(){o("anyKeys",(function(){return n.game.restart()}))}),1e3)},c=function(n){"KeyA"===n&&(i.moveLeft.isInputed=!0),"KeyD"===n&&(i.moveRight.isInputed=!0),"KeyS"===n&&(i.softDrop.isInputed=!0),"KeyJ"===n&&(i.rotateLeft.isInputed=!0),"KeyK"===n&&(i.rotateRight.isInputed=!0),"Escape"===n&&(i.togglePause.isInputed=!0),i.anyKeys.isInputed=!0},a=function(n){i[n].frame=0,i[n].isInputed=!1},f=function(n){"KeyA"===n&&a("moveLeft"),"KeyD"===n&&a("moveRight"),"KeyS"===n&&a("softDrop"),"KeyJ"===n&&a("rotateLeft"),"KeyK"===n&&a("rotateRight"),"Escape"===n&&a("togglePause"),a("anyKeys")}},441:function(n,t,e){"use strict";e.a(n,(async function(n){e.r(t);var r=e(5893),i=e(4515),o=n([i]);i=(o.then?await o:o)[0];t.default=function(){return(0,r.jsx)(i.U,{})}}))},2737:function(n){n.exports={root:"main_root__hlW79",container:"main_container__7vjRS",canvas:"main_canvas__ytx_c"}},3381:function(n){n.exports={root:"main_root__tJV_f",header:"main_header__V2m_c",footer:"main_footer__3i_DA",main:"main_main__Pad4p"}},9008:function(n,t,e){n.exports=e(5443)},4361:function(n,t,e){"use strict";var r=function([r]){return e.v(t,n.id,"3a613ff37005c52e",{"./wasm_bg.js":{__wbg_new_693216e109162396:r.Ih,__wbg_stack_0ddaca5d1abfb52f:r.yq,__wbg_error_09919627ac0992f5:r.gk,__wbindgen_object_drop_ref:r.ug,__wbg_getRandomValues_99bbe8a65f4aef87:r.j7,__wbg_randomFillSync_378e02b85af41ab6:r.yG,__wbg_static_accessor_NODE_MODULE_bdc5ca9096c68aeb:r.hC,__wbg_process_5729605ce9d34ea8:r.Id,__wbindgen_is_object:r.Wl,__wbg_versions_531e16e1a776ee97:r.jJ,__wbg_node_18b58a160b60d170:r.h6,__wbindgen_is_string:r.eY,__wbg_require_edfaedd93e302925:r.Ns,__wbg_crypto_2bc4d5b05161de5b:r.Y2,__wbg_msCrypto_d003eebe62c636a9:r.IS,__wbg_newnoargs_f579424187aa1717:r.bf,__wbg_call_89558c3e96703ca1:r.Z4,__wbg_self_e23d74ae45fb17d1:r.tL,__wbg_window_b4be7f48b24ac56e:r.Qu,__wbg_globalThis_d61b1f48a57191ae:r.EB,__wbg_global_e7669da72fd7f239:r.Yc,__wbindgen_is_undefined:r.XP,__wbg_buffer_5e74a88a1424a2e0:r.rf,__wbg_new_e3b800e570795b3c:r.Ts,__wbg_set_5b8081e9d002f0df:r.Mz,__wbg_length_30803400a8f15c59:r.Zu,__wbg_newwithlength_5f4ce114a24dfe1e:r._G,__wbg_subarray_a68f835ca2af506f:r.kC,__wbindgen_object_clone_ref:r.m_,__wbindgen_throw:r.Or,__wbindgen_memory:r.oH}})};e.a(n,(function(n){var t=n([e(7650)]);return t.then?t.then(r):r(t)}),1)}},function(n){n.O(0,[774,888,179],(function(){return t=5301,n(n.s=t);var t}));var t=n.O();_N_E=t}]);